# Adding Variable Volume Line Out to TV

## The Problem
I had a SONY Bravia HDTV (KDL46EX500) that allowed you to switch the audio output between the built-in speakers and a fixed-level RCA-style line out and an optical out (no headset output on this one).  The fixed-level line out and optical line out are options meant for A/V Receiver-based setups, which are controlled by their own remote control.  The idea is the audio gets sent at the proper, known level and amplified later with the volume controlled by a separate system presumably with its own remote control.  *But* I had a set of computer speakers - the Logitech Z323 2-way + subwoofer speaker system - that only had RCA inputs and a 3mm headphone jack input and only a volume control knob.

## Door #1 - Trying to edit the firmware
The first thing to consider, obviously, is if there was a new firwmare available for the TV that would offer this option.  Unfortunately, there was not.  Despite this being the case, it's technically still somewhat possible to download a copy of the latest firmware and modify it to do my bidding (NOT what I ended up doing).  This would require reading through the possibly-zipped/packaged assembly code meant to be installed on the destination hardware.  As I was researching the software that was used, I came across door #2.

## Door #2 - Hacking into the Sony TV's OS
It turns out that Sony Bravia TV's run Linux.  I found very much information at https://hackaday.com/2012/06/20/getting-root-on-a-sony-tv/ including a walkthrough of using a buffer overflow hack to become root (really it's available at https://github.com/CFSworks/nimue) , which is then used to open a port for remote, telnet access as root that lasts until the TV is restarted.  Sadly, this approach didn't work with my model - possibly because I had updated the firmware after 2012 in order to get rid of an annoying startup sound that couldn't be turned off by any option!  This truly would have been awesome and I believe was my way "in" to really get at those menus and the commands they run.

## Door #3 - Tapping into the Signals feeding the Speakers
OK, so much for sophistication.  It was back to basics with this one.  The basic idea is to open up the back cover and connect an extra set of wires to the speakers, which are volume-controlled by the standard TV remote control (perfect!).  The extra wires would then feed my RCA inputs.  That's great - the catches are 1) you have to isolate them to avoid a ground-loop and 2) you have to convert the signal level back down from speaker level (Volts) to line-out level (milliVolts).  Luckily, there are many such devices, which are typically used in cars to connect a subwoofer amp to your system using the signal at the rear speakers.  OK, it's a bit uglier because now I have extra wires coming out of the back of my TV - although theoretically I could have tried to mount some RCA connectors on the back of the TV, but that would have required modifications which were not "undoable," plus who looks behind the TV anyway?  ... but it works.  I just set the volume on the Logitech system about halfway up and control the input signal with my TV remote control.  I additionally get the benefit of better Treble coming from the TV's speakers - sort of like having a center speaker.  Sadly, the total cost wasn't as good as the hacking methods, which would have been free.  It ended up costing about $10 + some lose wire I had lying around.  I ended up going with the [PAC SNI-35](https://www.amazon.com/PAC-SNI-35-Variable-Line-Converter/dp/B001EAWS3W).

## Unpursued, but Fun-to-Consider Idea
Given my familiarity with receiving and sending IR remote control signals, I considered using the fixed line out and hooking a stepper motor up to the volume control knob!  Really messy solution, but would have been kind of neat.
